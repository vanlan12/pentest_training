# RESET PASS ROOT MYSQL

>Người thực hiện: Lưu Văn Lân

>Ngày đăng: 15/4/2017

# MỤC LỤC CÁC BƯỚC THỰC HIỆN:

[Bước1: STOP các dịch vụ MySQL](#1)

[Bước 2: Khởi động lại service Mysql với chế độ không xác thực](#2)

[Bước 3: Kết nối vào lại MySql và cập nhật lại mật khẩu root](#3)

[Bước 4: Tiến hành khởi động lại service mysql và truy lại với new password vừa tạo](#4)

# NỘI DUNG
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Bước1: STOP các dịch vụ MySQL
<a name="1"></a>
-(Ubuntu và Debian) Chạy lệnh:

`sudo /etc/init.d/mysql stop`

-(CentOS,Fedora và Red Hat Enterprise Linux) Chạy lệnh:

`sudo /etc/init.d/mysqld stop`
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Bước 2: Khởi động lại service Mysql với chế độ không xác thực:
<a name="2"></a>
`mysql_safe –skip-grant-tables &`

 -Bước này nếu gặp lỗi: 

 ![text](http://i.imgur.com/3IN7jI7.png)

---> Ta xử lí lỗi này với các lệnh:
```sh
sudo mkdir -p /var/run/mysqld
sudo chown mysql:mysql /var/run/mysqld
```

---> Thực hiện chạy lại lệnh: `mysql_safe –skip-grant-tables &` sẽ không gặp lỗi nữa.
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Bước 3: Kết nối vào lại MySql và cập nhật lại mật khẩu root:
<a name="3"></a>

-Kết nối vào Mysql:

`mysql -u root`

-Cập nhật lại mật khẩu root
```sh
mysql> use mysql;

mysql> UPDATE user SET Password = PASSWORD (‘yournewpassword’) WHERE User=’root’;
```
--> Lúc này nếu gặp lỗi `ERROR 1054 (42S22): Unknown column 'password' in 'field list'`. Tức là không có cột nào tên là password trong table đó cả. Để xử lí lỗi này ta thực hiện lệnh sau:
```sh
show tables;
describe user;
```
--> Xuất hiện một bảng có thông tin trong table user . Để ý ta sẽ thấy một cột như sau:
![text](http://i.imgur.com/1dKrGIm.png)

--> Tức là cột `authentication_string` chính là cột password ta muốn tìm.

-Tiến hành update new pasword: `update user set password=PASSWORD("mynewpassword") where User='root';`

![text](http://i.imgur.com/nPYoOcq.png)

-Thoát ra:
```sh
flush privileges;

quit;
```

### CÁCH 2 UPDATE PASWORD :
-Nếu gặp lỗi `ERROR 1054 (42S22): Unknown column 'password' in 'field lít` thì thực hiện update newpassword theo lệnh sau:

`SET PASSWORD FOR root@'localhost' = PASSWORD('password');	`
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


## Bước 4: Tiến hành khởi động lại service mysql và truy lại với new password vừa tạo:
<a name="4"></a>
-Với Ubuntu và Debian:
```sh
sudo /etc/init.d/mysql stop
...
sudo /etc/init.d/mysql start
```

-Với CentOS,Fedora và Red Hat Enterprise Linux:
```sh
sudo /etc/init.d/mysqld stop
...
sudo /etc/init.d/mysqld start
```

-Truy cập lại mysql với newpassword"
`mysql -u root -p`






